<!doctype html>
<html lang="pl">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
    <title>1 z 10 — Prowadzący</title>
    <link rel="stylesheet" href="/css/host.css" />
</head>
<body>
<header id="topbar">
    <div class="brand">
        <div class="brand-logo">1/10</div>
        <div class="brand-copy">
            <div class="brand-title">Prowadzący</div>
            <div class="brand-sub">Panel sterowania</div>
        </div>
    </div>
    <button class="btn icon-only hud-toggle" id="btnHudToggle" aria-label="Panel statystyk" aria-expanded="false" aria-controls="hudMenu">
        <svg viewBox="0 0 48 48" aria-hidden="true"><path d="M10 14a2 2 0 0 1 0-4h28a2 2 0 0 1 0 4H10Zm0 12a2 2 0 0 1 0-4h28a2 2 0 0 1 0 4H10Zm-2 10a2 2 0 0 1 2-2h28a2 2 0 0 1 0 4H10a2 2 0 0 1-2-2Z"/></svg>
        <span class="sr-only">Pokaż statystyki</span>
    </button>
    <div class="hud" id="hudMenu">
        <div class="scoreboard">
            <div class="score-card" role="group" aria-label="Gracze">
                <div class="score-icon" aria-hidden="true">
                    <svg viewBox="0 0 48 48"><path d="M15.5 6a8.5 8.5 0 1 1-8.5 8.5A8.51 8.51 0 0 1 15.5 6Zm0 16a12.5 12.5 0 0 1 12.5 12.5V39H3v-4.5A12.5 12.5 0 0 1 15.5 22Z"/></svg>
                </div>
                <span class="score-value"><span id="statPlayers">0</span><span class="score-total">/<span id="statPlayersMax">10</span></span></span>
            </div>
            <div class="score-card" role="group" aria-label="Pytania">
                <div class="score-icon" aria-hidden="true">
                    <svg viewBox="0 0 48 48"><path d="M12 8h24a4 4 0 0 1 4 4v24a4 4 0 0 1-4 4H12a4 4 0 0 1-4-4V12a4 4 0 0 1 4-4Zm12 6a2 2 0 0 0-2 2v8h-6a2 2 0 0 0 0 4h8a2 2 0 0 0 2-2V16a2 2 0 0 0-2-2Z"/></svg>
                </div>
                <span class="score-value" id="statAsked">0</span>
            </div>
        </div>
        <div class="answer-card" role="group" aria-label="Czas">
            <div class="answer-icon" aria-hidden="true">
                <svg viewBox="0 0 48 48"><path d="M24 4a20 20 0 1 1-20 20A20 20 0 0 1 24 4Zm0 4a16 16 0 1 0 16 16A16 16 0 0 0 24 8Zm-2 6a2 2 0 0 1 4 0v8h6a2 2 0 0 1 0 4h-8a2 2 0 0 1-2-2Z"/></svg>
            </div>
            <span class="answer-value" id="statAnswerTime">0 s</span>
        </div>
        <div class="hud-extras" id="hudExtras"></div>
    </div>
    <div class="top-actions">
        <div class="clock" aria-live="polite">
            <div class="clock-icon" aria-hidden="true">
                <svg viewBox="0 0 48 48"><path d="M24 4a20 20 0 1 1-20 20A20 20 0 0 1 24 4Zm0 4a16 16 0 1 0 16 16A16 16 0 0 0 24 8Zm-2 6a2 2 0 0 1 4 0v8h6a2 2 0 0 1 0 4h-8a2 2 0 0 1-2-2Z"/></svg>
            </div>
            <div class="clock-details">
                <span class="clock-label">Zegar</span>
                <span class="clock-value" id="hostClock">00:00</span>
            </div>
        </div>
        <button class="btn glass" id="btnReset">Reset gry</button>
        <button class="btn glass" id="btnNew">Nowa gra</button>
    </div>
</header>

<div id="toast" class="toast hidden"></div>

<div id="welcomeOverlay" class="overlay hidden">
    <div class="overlay-card welcome-card">
        <div class="welcome-topline">
            <div class="welcome-brand">
                <div class="welcome-logo">1/10</div>
                <div class="welcome-copy">
                    <span class="welcome-caption">Panel prowadzącego</span>
                    <span class="welcome-heading" id="welcomeHeading">Witaj w „1 z 10”</span>
                </div>
            </div>
            <div class="welcome-clock">
                <svg viewBox="0 0 48 48" aria-hidden="true"><path d="M24 4a20 20 0 1 1-20 20A20 20 0 0 1 24 4Zm0 4a16 16 0 1 0 16 16A16 16 0 0 0 24 8Zm-2 6a2 2 0 0 1 4 0v8h6a2 2 0 0 1 0 4h-8a2 2 0 0 1-2-2Z"/></svg>
                <span id="welcomeClock">00:00</span>
            </div>
        </div>
        <div class="welcome-main">
            <div class="welcome-greeting">
                <div class="welcome-text">
                    <h1 id="welcomeTitle">Witaj!</h1>
                    <p id="welcomeSubtitle" class="welcome-status">Oczekiwanie na dołączenie graczy…</p>
                </div>
                <p id="welcomeHint" class="welcome-hint">Zaproś uczestników do pokoju gry.</p>
                <div class="welcome-footer">
                    <div class="welcome-counter">
                        <span class="counter-label">Graczy gotowych</span>
                        <span id="welcomeCount" class="counter-value">0/10</span>
                    </div>
                    <button class="btn primary" id="btnOverlayStart">Rozpocznij</button>
                </div>
            </div>
            <div class="welcome-visual" aria-hidden="true">
                <div class="welcome-portrait">
                    <div class="welcome-avatar">
                        <svg viewBox="0 0 120 120"><path fill="#d9e2ff" d="M60 0a36 36 0 1 1-36 36A36 36 0 0 1 60 0Z"/><path fill="#fff" d="M60 16c7.7 0 14 6.3 14 14s-6.3 14-14 14-14-6.3-14-14 6.3-14 14-14Zm0 38c12.7 0 30 6.2 30 18.9V86H30v-13.1C30 60.2 47.3 54 60 54Z"/></svg>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<div id="targetOverlay" class="overlay hidden">
    <div class="overlay-card small">
        <h2>Potwierdź wybór gracza</h2>
        <p id="targetMessage">—</p>
        <div class="overlay-actions">
            <button class="btn primary" id="btnTargetApprove">Akceptuj</button>
            <button class="btn ghost" id="btnTargetReject">Odrzuć</button>
        </div>
    </div>
</div>

<main id="layout">
    <section id="stageColumn">
        <article class="stage-card">
            <header class="stage-head">
                <span class="stage-pill" id="stagePhase">Czekamy na start</span>
                <h2 class="stage-title" id="stageTitle">Witaj Marcelu</h2>
                <p class="stage-sub" id="stageSub">Rozpocznij rozgrywkę, aby zobaczyć kolejne kroki.</p>
            </header>
            <div class="stage-controls">
                <div class="stage-buttons" id="stageAction">
                    <button class="btn primary" id="btnStart" data-label="Rozpocznij">Rozpocznij</button>
                    <button class="btn" id="btnIntroDone" data-label="Rozpocznij czytanie">Rozpocznij czytanie</button>
                    <button class="btn" id="btnQuestion" data-label="Wybierz pytanie">Wybierz pytanie</button>
                    <button class="btn" id="btnRead" data-label="Czytam">Czytam</button>
                    <button class="btn" id="btnReadDone" data-label="Przeczytałem">Przeczytałem</button>
                    <button class="btn" id="btnAnnotationDone" data-label="Przeczytałem adnotację">Przeczytałem adnotację</button>
                </div>
                <div class="stage-placeholder" id="stagePlaceholder">Sterowanie pojawi się automatycznie, gdy będzie potrzebne.</div>
            </div>
            <div class="stage-steps-wrapper">
                <div class="stage-steps-title">Faza gry</div>
                <ol class="stage-steps" id="stageSteps"></ol>
            </div>
        </article>
    </section>

    <section id="infoColumn">
        <article class="card question-card">
            <header class="card-header">
                <div>
                    <h3>Podgląd pytania</h3>
                    <div id="questionBadges" class="badges">
                        <span class="badge" id="badgeDifficulty">—</span>
                        <span class="badge" id="badgeCategory">—</span>
                    </div>
                </div>
                <button class="btn ghost" id="btnSelectQuestion">Przegląd pytań</button>
            </header>
            <div class="question-body">
                <div class="question-label" id="questionLabel">Brak wybranego pytania</div>
                <div class="question-text" id="questionText">Wybierz pytanie, aby rozpocząć.</div>
            </div>
            <div class="question-answer">
                <span class="answer-tag">ODP:</span>
                <span class="answer-text" id="questionAnswer">—</span>
            </div>
            <div class="question-annotation hidden" id="questionAnnotationWrap">
                <div class="annotation-label">Adnotacja</div>
                <div class="annotation-text" id="questionAnnotation">—</div>
            </div>
        </article>

        <article id="answeringCard" class="card answering-card">
            <header class="answer-head">
                <div class="answer-title">
                    <h3>Aktualnie odpowiada</h3>
                    <div id="ansJudge" class="judge" aria-live="polite"></div>
                </div>
            </header>
            <div class="answer-body">
                <div class="answer-info">
                    <div class="answer-avatar">
                        <img id="ansAv" src="/img/host.png" alt="">
                    </div>
                    <div class="answer-copy">
                        <div class="answer-name" id="ansName">—</div>
                        <div class="answer-seat" id="ansSeat">Stanowisko —</div>
                        <div class="answer-meta">
                            <span class="answer-caption" id="ansTime">Czas odpowiedzi ustawiony na 0.0 s</span>
                        </div>
                    </div>
                </div>
            </div>
            <div class="answer-side">
                <div class="answer-progress" id="timerBox">
                    <div class="progress-head">
                        <span class="progress-label">Pozostały czas</span>
                        <span class="progress-value" id="timerSummary">0.0 s</span>
                    </div>
                    <div class="timer-track" id="timerBar">
                        <div class="timer-fill" id="timerFill"></div>
                    </div>
                </div>
                <div class="answer-judge is-idle">
                    <button class="btn bad judge-btn" id="btnBad" data-label="✗ Zła" data-icon="✗" aria-label="Zła odpowiedź">
                        <span class="sr-only">Zła odpowiedź</span>
                    </button>
                    <button class="btn good judge-btn" id="btnGood" data-label="✓ Dobra" data-icon="✓" aria-label="Dobra odpowiedź">
                        <span class="sr-only">Dobra odpowiedź</span>
                    </button>
                </div>
            </div>
            <div class="answer-actions">
                <button class="btn" id="btnNext" data-label="Kolejne pytanie">Kolejne pytanie</button>
            </div>
        </article>

        <article class="card metrics-card">
            <h3>Tempo gry</h3>
            <div class="metrics-grid">
                <div class="metric"><span>Sesja trwa</span><strong id="metricRuntime">00:00</strong></div>
                <div class="metric"><span>Pytania w tej sesji</span><strong id="metricCount">0</strong></div>
                <div class="metric"><span>Średni czas pytania</span><strong id="metricAverage">0,0 s</strong></div>
                <div class="metric"><span>Ostatnie pytanie</span><strong id="metricLast">0,0 s</strong></div>
            </div>
        </article>
    </section>
</main>

<div id="questionModal" class="modal hidden">
    <div class="modal-card">
        <div class="modal-header">
            <h3>Wybierz pytanie</h3>
            <button class="btn ghost" id="btnCloseModal">Zamknij</button>
        </div>
        <div class="modal-body">
            <aside id="difficultyList"></aside>
            <div class="modal-content">
                <div class="modal-toolbar">
                    <div id="questionModeToggle" class="mode-toggle" role="tablist" aria-label="Sposób wyboru pytania">
                        <button type="button" class="mode-btn" data-mode="RANDOM">Losuj pytanie</button>
                        <button type="button" class="mode-btn active" data-mode="LIST">Wybierz z listy</button>
                    </div>
                    <div id="usageFilter" class="usage-filter" role="tablist" aria-label="Filtr pytań">
                        <button type="button" class="usage-btn active" data-filter="UNUSED">NIEWYKORZYSTANE</button>
                        <button type="button" class="usage-btn" data-filter="USED">WYKORZYSTANE</button>
                        <button type="button" class="usage-btn" data-filter="ALL">WSZYSTKIE</button>
                    </div>
                </div>
                <div id="randomPanel" class="random-panel hidden" aria-live="polite">
                    <p>Wylosuj pytanie z wybranego poziomu trudności i filtra stanu. Wylosowane pytanie zostanie ustawione automatycznie.</p>
                    <button class="btn primary" id="btnRandomQuestion">Losuj pytanie</button>
                    <div id="randomNotice" class="random-notice"></div>
                </div>
                <div id="listPanel" class="list-panel">
                    <div id="categoryHeader" class="modal-section-title">Kategorie</div>
                    <div id="categoryList" class="category-grid"></div>
                    <div id="questionList" class="question-list"></div>
                </div>
            </div>
        </div>
    </div>
</div>

<audio id="sndIntro" preload="auto" src="/audio/intro.mp3"></audio>
<audio id="sndBoom"  preload="auto" src="/audio/boom.mp3"></audio>

<script src="https://cdn.jsdelivr.net/npm/sockjs-client@1/dist/sockjs.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/stompjs@2.3.3/lib/stomp.min.js"></script>
<script type="module" src="/js/host.js"></script>
</body>
</html>
