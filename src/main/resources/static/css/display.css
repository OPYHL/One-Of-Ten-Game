/* ===================== RESET / BASE ===================== */
:root{
  --bg: #0b1220;
  --panel: #0f1729;
  --panel2:#0c1426;
  --line: #22324d;
  --text: #e7f0ff;
  --muted:#9cb2d9;
  --accent:#3b6df6;
  --ok:#20c997;
  --bad:#ff4757;

  --card-light:#f7faff;
  --card-shadow:rgba(2,8,20,.6);

  /* siatka graczy */
  --grid-gap-x: 18px;
  --grid-gap-y: 18px;

  /* karta gracza – w/ h liczone też w JS */
  --w: 320px;
  --h: 190px; /* niższa baza */
}

*{ box-sizing:border-box }
html,body{ height:100% }
html{
  background:
    radial-gradient(1200px 1200px at 50% 140%, rgba(22,38,70,.45) 0%, rgba(11,18,32,0) 65%),
    var(--bg);
}
body{
  margin:0; color:var(--text);
  font:600 16px/1.25 Inter,system-ui,Segoe UI,Roboto,Helvetica,Arial,sans-serif;
  letter-spacing:.2px;
}
img{ max-width:100%; display:block }
.hidden{ display:none !important }

/* =================== AUDIO OVERLAY =================== */
.audio-overlay{
  position:fixed; inset:0; display:flex; align-items:center; justify-content:center;
  background:rgba(5,10,20,.88);
  backdrop-filter:blur(20px);
  z-index:260;
  transition:opacity .25s ease;
}
.audio-overlay.hidden{ opacity:0; pointer-events:none; }
.audio-card{
  width:min(520px,92vw);
  padding:38px 42px;
  border-radius:26px;
  background:linear-gradient(155deg, rgba(18,35,70,.94), rgba(9,17,36,.94));
  border:1px solid rgba(73,110,210,.55);
  box-shadow:0 42px 140px rgba(0,0,0,.6);
  display:grid; gap:20px; text-align:center;
}
.audio-card h1{ margin:0; font-size:32px; font-weight:900; color:#f1f7ff; }
.audio-card p{ margin:0; color:var(--muted); font-weight:600; line-height:1.45; }
.audio-icon{ width:94px; height:94px; border-radius:28px; background:rgba(59,109,246,.18); border:1px solid rgba(73,110,210,.65); display:grid; place-items:center; margin:0 auto; box-shadow:0 20px 50px rgba(8,16,34,.45); }
.audio-icon svg{ width:52px; height:52px; }
.audio-actions{ display:flex; gap:14px; justify-content:center; flex-wrap:wrap; }

/* =================== WELCOME SCREEN =================== */
.waiting-screen{
  position:fixed; inset:0; display:flex; align-items:center; justify-content:center;
  z-index:120; pointer-events:none; opacity:0; transition:opacity .3s ease;
  background:radial-gradient(900px 900px at 50% 40%, rgba(43,73,140,.18), rgba(8,14,26,0));
}
.waiting-screen.show{ opacity:1; }
.waiting-card{
  width:min(520px,88vw);
  padding:40px 44px;
  border-radius:26px;
  background:linear-gradient(185deg, rgba(14,24,46,.96), rgba(7,12,24,.92));
  border:1px solid rgba(65,102,190,.48);
  color:#dbe8ff;
  text-align:center;
  box-shadow:0 44px 160px rgba(0,0,0,.55);
  display:grid; gap:20px;
}
.waiting-avatar{ width:110px; height:110px; border-radius:32px; background:linear-gradient(180deg,rgba(63,110,246,.25),rgba(20,44,99,.65)); margin:0 auto; display:grid; place-items:center; box-shadow:0 20px 60px rgba(16,34,78,.55); border:1px solid rgba(80,124,232,.42); }
.waiting-avatar img{ width:70px; height:70px; object-fit:contain; filter:drop-shadow(0 16px 32px rgba(8,12,24,.45)); }
.waiting-card h2{ margin:0; font-size:32px; font-weight:900; letter-spacing:.4px; color:#f1f6ff; }
.waiting-card p{ margin:0; font-size:17px; font-weight:600; color:rgba(204,220,255,.86); }
.waiting-card p:last-of-type{ color:rgba(172,196,244,.78); font-weight:500; }
.waiting-screen.full .waiting-card{ border-color:rgba(92,134,242,.65); box-shadow:0 54px 160px rgba(24,40,92,.6); }
.waiting-screen.full .waiting-card p{ color:rgba(230,238,255,.9); }
.waiting-screen.full .waiting-card p:last-of-type{ color:rgba(196,214,255,.85); }
.waiting-screen.full .waiting-counter{ background:rgba(63,110,246,.28); border-color:rgba(96,138,255,.6); }
.waiting-roster{ position:fixed; left:50%; bottom:32px; transform:translateX(-50%); width:min(1120px,92vw); display:grid; grid-template-columns:repeat(auto-fit,minmax(220px,1fr)); gap:16px; z-index:110; opacity:0; pointer-events:none; transition:opacity .25s ease, transform .25s ease; justify-items:stretch; }
.waiting-roster.show{ opacity:1; transform:translate(-50%,0); }
.waiting-roster.empty{ grid-template-columns:1fr; }
.waiting-roster .waiting-empty{ padding:12px 0; text-align:center; font-weight:600; color:rgba(180,202,244,.8); }
.waiting-roster-item{ display:flex; align-items:center; gap:12px; padding:12px 18px; border-radius:18px; background:rgba(12,22,40,.78); border:1px solid rgba(70,108,198,.5); box-shadow:0 24px 60px rgba(5,10,25,.55); min-height:72px; width:100%; }
.waiting-roster-item .avatar{ width:48px; height:48px; border-radius:16px; background:radial-gradient(64px 64px at 50% 24%, rgba(70,110,210,.28), rgba(10,20,40,.95)); display:grid; place-items:center; border:1px solid rgba(92,134,240,.6); }
.waiting-roster-item .avatar img{ width:38px; height:38px; object-fit:contain; filter:drop-shadow(0 10px 22px rgba(3,8,20,.75)); }
.waiting-roster-item .meta{ display:flex; flex-direction:column; align-items:flex-start; gap:2px; font-weight:700; color:#ecf2ff; }
.waiting-roster-item .seat{ font-size:.78rem; text-transform:uppercase; letter-spacing:.16em; color:rgba(162,188,236,.76); }
.waiting-empty{ padding:12px 0; font-weight:600; color:rgba(172,195,240,.78); text-align:center; }
.waiting-counter{ display:flex; align-items:center; justify-content:center; gap:16px; padding:18px 20px; border-radius:20px; background:rgba(63,110,246,.16); border:1px solid rgba(76,118,232,.45); }
.counter-icon{ width:56px; height:56px; border-radius:18px; background:rgba(9,18,34,.9); display:grid; place-items:center; box-shadow:0 20px 52px rgba(10,16,32,.65); border:1px solid rgba(63,110,246,.45); }
.counter-icon svg{ width:34px; height:34px; fill:#7fa2ff; }
.counter-info{ display:grid; text-align:left; gap:4px; }
.counter-value{ font-size:30px; font-weight:900; color:#f6fbff; }
.counter-label{ font-size:13px; font-weight:700; color:rgba(184,205,247,.78); text-transform:uppercase; letter-spacing:.16em; }

.btn{
  padding:12px 20px;
  border-radius:999px;
  border:1px solid transparent;
  font:700 16px/1 Inter,system-ui,sans-serif;
  letter-spacing:.25px;
  cursor:pointer;
  transition:transform .18s ease, box-shadow .18s ease, background .18s ease;
}
.btn:hover{ transform:translateY(-1px); box-shadow:0 16px 40px rgba(8,15,32,.35); }
.btn:active{ transform:translateY(0); }
.btn:disabled{ opacity:.45; cursor:not-allowed; box-shadow:none; transform:none; }
.btn.primary{ background:var(--accent); color:#fff; box-shadow:0 18px 50px rgba(59,109,246,.35); }
.btn.primary:hover{ box-shadow:0 26px 60px rgba(59,109,246,.45); }
.btn.ghost{ background:rgba(9,16,32,.62); border-color:rgba(57,91,170,.4); color:var(--text); }
.btn.ghost:hover{ background:rgba(12,20,40,.82); }

body.waiting-mode #hud,
body.waiting-mode #questionBoard,
body.waiting-mode #stage,
body.waiting-mode #centerBox,
body.waiting-mode #timebarWrap,
body.waiting-mode #banner{
  display:none !important;
}
body.waiting-mode #gridWrap{ display:none; }

/* ======================== HUD ========================= */
#hud{
  position:fixed; inset:12px 12px auto 12px; display:flex; align-items:center; gap:16px; z-index:40;
}
.hud-left,.hud-right{ display:flex; align-items:center; gap:8px }
.hud-center{ flex:1; display:flex; justify-content:center }
.pill{
  display:inline-flex; gap:8px; align-items:center; padding:7px 10px;
  background:linear-gradient(180deg, #0f1830 0%, #0e1628 100%);
  border:1px solid #1c2a44; border-radius:12px; box-shadow:0 6px 18px rgba(0,0,0,.28);
  transform-origin:50% 50%;
}
.pill .k{ color:#a9bce1; font-weight:700; opacity:.9; margin-right:6px }
.pill .v{ background:#0b1324; border:1px solid #1a2942; border-radius:10px; padding:3px 8px; min-width:22px; text-align:center }
.pill.phase .v{ background:#14203a; color:#d7e6ff; border-color:#213358 }
.pill.bump{ animation: hudBump .34s ease }
@keyframes hudBump{ 50%{ transform:scale(1.08) } }

/* --------- baner (komunikaty nad siatką) ---------- */
.banner{
  transform:translateY(-16px);
  min-width:min(980px,76vw);
  padding:12px 16px; border-radius:14px;
  background:linear-gradient(180deg,#101a31 0%, #0f172b 100%);
  border:1px solid #213358; color:#dbe7ff;
  box-shadow:0 18px 60px rgba(0,0,0,.40), inset 0 1px 0 rgba(255,255,255,.02);
  opacity:0; pointer-events:none; transition:opacity .18s ease, transform .18s ease;
}
.banner.show{ opacity:1; transform:none }


/* ===================== TABLICA PYTANIA ===================== */
#questionBoard{
  position:fixed; top:88px; left:50%; transform:translateX(-50%);
  width:min(1100px,88vw); z-index:28;
}
#questionBoard .question-card{
  background:linear-gradient(180deg,#101a31,#0f1629);
  border:1px solid #213358; border-radius:18px;
  box-shadow:0 26px 90px rgba(0,0,0,.55), inset 0 1px 0 rgba(255,255,255,.03);
  padding:22px 26px; display:grid; gap:14px;
}
#questionBoard .meta{display:flex; gap:12px; flex-wrap:wrap}
#questionBoard .pill{background:rgba(15,27,46,.8); border-color:#243659;}
#questionBoard .text{font:800 28px/1.2 Inter,system-ui,sans-serif; color:#f2f7ff; min-height:72px}
#questionBoard .answer{font:700 20px/1.2 Inter,system-ui,sans-serif; color:rgba(32,201,151,.85); opacity:.3; transition:opacity .25s ease}
#questionBoard.revealed .answer{opacity:1}
#questionBoard .answer.hidden{opacity:.25;color:#9cb2d9}

#questionBoard.flash .question-card{animation:questionFlash .5s ease}
@keyframes questionFlash{0%{box-shadow:0 26px 90px rgba(0,0,0,.55), inset 0 1px 0 rgba(255,255,255,.03);}50%{box-shadow:0 26px 110px rgba(59,109,246,.4), inset 0 1px 0 rgba(255,255,255,.12);}100%{box-shadow:0 26px 90px rgba(0,0,0,.55), inset 0 1px 0 rgba(255,255,255,.03);}}

/* ===================== SCENA (center) ===================== */
#stage{
  position:fixed; inset:130px 0 10px; display:grid; place-items:center; z-index:30; pointer-events:none;
  opacity:0; transform:translateY(8px); transition:opacity .25s ease, transform .25s ease;
}
#stage.show{ opacity:1; transform:none }
#stage .stage-card{
  width:min(1220px,84vw); min-height:240px;
  background:linear-gradient(180deg, #101a31 0%, #0f1729 100%);
  border:1px solid #213358; border-radius:20px;
  box-shadow:0 30px 120px rgba(0,0,0,.55), inset 0 1px 0 rgba(255,255,255,.03);
  padding:28px 32px;
  display:grid; grid-template-columns:auto 1fr auto; align-items:center; gap:32px;
  pointer-events:auto; position:relative;
}
#stage .stage-avatar{
  position:relative; width:148px; height:148px;
  border-radius:24px; border:1px solid #22324d;
  background:radial-gradient(140px 110px at 50% 32%, rgba(32,53,98,.82), rgba(14,24,44,.95));
  display:grid; place-items:center; box-shadow:0 24px 70px rgba(2,8,20,.55);
}
#stage .stage-avatar img{ width:110px; height:110px; object-fit:contain; filter:drop-shadow(0 16px 36px rgba(0,0,0,.45)); }
#stage .stage-seat{
  position:absolute; bottom:100%; left:-8px; transform:translateY(-12px);
  padding:8px 18px; border-radius:999px;
  background:rgba(14,24,44,.9); border:1px solid rgba(74,110,202,.55);
  color:#e1ecff; font-weight:800; font-size:14px; letter-spacing:.12em; text-transform:uppercase;
  box-shadow:0 14px 40px rgba(3,8,22,.45);
}
#stage .stage-body{ display:flex; flex-direction:column; gap:24px; }
#stage .stage-header{ display:flex; flex-wrap:wrap; align-items:flex-end; gap:18px; }
#stage .stage-name{ font-size:44px; font-weight:900; letter-spacing:.5px; color:#f4f8ff; }
#stage .stage-score{
  padding:8px 16px; border-radius:14px; border:1px solid rgba(74,110,202,.45);
  background:rgba(59,109,246,.14); color:#9bb7ff;
  font-weight:800; font-size:18px; letter-spacing:.08em; text-transform:uppercase;
  box-shadow:0 14px 36px rgba(5,12,30,.35);
}
#stage .stage-stats{ display:flex; flex-wrap:wrap; gap:26px; align-items:center; }
#stage .stage-lives{ display:flex; align-items:center; gap:14px; }
#stage .stage-lives .heart{ width:34px; height:34px; fill:#ff6b81; filter:drop-shadow(0 10px 26px rgba(255,107,129,.35)); }
#stage .stage-lives .heart.dead{ opacity:.28; filter:none; }
#stage .stage-timer{
  display:flex; align-items:center; gap:14px;
  padding:10px 18px; border-radius:16px;
  background:rgba(14,24,44,.72); border:1px solid rgba(59,109,246,.32);
  box-shadow:0 16px 44px rgba(3,8,20,.45);
}
#stage .stage-timer.hidden{ display:none; }
#stage .stage-timer-label{ font-size:13px; font-weight:700; letter-spacing:.16em; color:rgba(156,178,217,.82); text-transform:uppercase; }
#stage .stage-countdown{
  width:68px; height:68px; border-radius:18px; display:grid; place-items:center;
  border:1px solid rgba(74,110,202,.55); background:rgba(18,30,54,.9);
  font:900 30px/1 Inter,system-ui,sans-serif; color:#f5f9ff;
  box-shadow:0 16px 44px rgba(6,12,28,.45);
}
#stage .stage-judge{
  font-weight:900; font-size:58px; opacity:0; transform:scale(.9);
  transition:opacity .22s ease, transform .22s ease;
}
#stage .stage-judge.show{ opacity:1; transform:none }
#stage .stage-judge.good{ color:#1fdf9e }
#stage .stage-judge.bad{ color:#ff5b6b }

/* ===================== CENTER-CARD (info & buzzing) ===================== */
#centerBox{
  position:fixed; inset:0; display:grid; place-items:center; z-index:26; pointer-events:none;
  opacity:0; transform:translateY(6px); transition:opacity .22s ease, transform .22s ease;
}
#centerBox.show{ opacity:1; transform:none }
.centerCard{
  pointer-events:auto;
  width:min(1100px,86vw);
  min-height:120px;
  background:linear-gradient(180deg,#101a31,#0f1629);
  border:1px solid #213358; border-radius:18px; padding:22px 26px;
  display:grid; grid-template-columns:88px 1fr; gap:16px; align-items:center;
  box-shadow:0 26px 100px rgba(0,0,0,.55), inset 0 1px 0 rgba(255,255,255,.03);
}
.centerCard .hostAv{ width:88px; height:88px; border-radius:14px; border:1px solid #22324d; background:#0e1628; display:grid; place-items:center }
.centerCard .hostAv img{ width:68px; height:68px; object-fit:contain; opacity:.92 }
.centerCard .title{ margin:0; font:900 28px/1.15 Inter,system-ui,sans-serif; color:#e6eeff }
.centerCard .subtitle{ margin-top:8px; color:#9cb2d9; font-weight:700 }
.centerCard.buzz{ animation:glow 1.2s ease infinite alternate }
.centerCard.xl{ min-height:160px }
.centerCard.xl .title{ font-size:34px }
.centerCard.xl .subtitle{ font-size:18px }
@keyframes glow{
  from{ box-shadow:0 26px 100px rgba(0,0,0,.55), 0 0 0 rgba(59,109,246,.0) inset }
  to  { box-shadow:0 26px 100px rgba(0,0,0,.55), 0 0 24px rgba(59,109,246,.25) inset }
}

/* ==================== SIATKA GRACZY ==================== */
#gridWrap{
  position:fixed;
  inset:auto 0 0;
  padding:6px 24px 0;
  z-index:20;
  display:flex;
  justify-content:center;
  align-items:flex-end;
  max-height:100vh;
  overflow:hidden;
  background:linear-gradient(180deg, rgba(10,18,31,0) 0%, rgba(10,18,31,.55) 26%, rgba(10,18,31,.82) 86%);
}

#gridClamp{
  width:100%;
  max-height:100%;
  display:flex;
  flex-direction:column;
  justify-content:flex-end;
  align-items:center;
  gap:18px;
  padding-top:var(--grid-lift, 0px);
  padding-bottom:var(--grid-bottom-pad, 0px);
  transition:padding-top .35s ease, padding-bottom .35s ease;
}
#grid{
  transform-origin:50% 100%;
  transform:scale(var(--scale,1));
  display:grid; gap:24px; justify-items:center; align-items:end;
}
.row{ display:grid; gap:var(--grid-gap-y) var(--grid-gap-x); justify-content:center }
.row.top{ margin-bottom:var(--grid-gap-y) }

.card{
  width:var(--w); height:var(--h); position:relative;
  background:linear-gradient(180deg, #0f182d 0%, #0f1727 100%);
  border:1px solid #20314d; border-radius:18px;
  box-shadow:0 18px 70px rgba(0,0,0,.45), inset 0 1px 0 rgba(255,255,255,.02);
  padding:16px 16px 18px; overflow:hidden;
  transition:transform .18s ease, box-shadow .18s ease, border-color .18s ease, background .18s ease;
}
.card.answering{ border-color:#2b58ff; box-shadow:0 26px 110px rgba(43,88,255,.26), 0 16px 60px rgba(0,0,0,.45) }
.card.cardJoin{ animation:cardIn .35s ease }
@keyframes cardIn{ from{ transform:translateY(12px) scale(.98); opacity:.0 } to{ transform:none; opacity:1 } }

.card .seat{
  position:absolute; left:12px; top:12px; width:46px; height:46px; display:grid; place-items:center;
  border-radius:50%; border:1px solid #23324d; color:#e8f1ff; background:rgba(20,30,50,.6);
  font-weight:900; text-shadow:0 1px 0 rgba(0,0,0,.25)
}
.card .name{ text-align:center; font:900 20px/1.1 Inter,system-ui,sans-serif; letter-spacing:.4px; margin-top:0 }

.card .avatar{ position:absolute; left:0; right:0; top:54px; bottom:54px; display:grid; place-items:center; pointer-events:none }
.card .avatar img{ width:min(66%, 220px); height:100%; object-fit:contain; filter:drop-shadow(0 12px 34px rgba(0,0,0,.45)); opacity:.98 }

.livesBox{
  position:absolute; right:14px; bottom:12px; display:flex; gap:12px; align-items:center
}
.heart{ width:26px; height:26px; fill:#ff4757; filter:drop-shadow(0 4px 10px rgba(255,71,87,.25)) }
.heart.dead{ opacity:.28; filter:none }

.ptsBox{
  position:absolute; left:12px; bottom:10px; display:flex; align-items:center; gap:10px;
  background:rgba(12,22,41,.6); border:1px solid #20314d; padding:6px 10px; border-radius:12px;
}
.ptsBox .medal{ width:20px; height:20px; display:grid; place-items:center }
.ptsBox .medal svg{ width:20px; height:20px; fill:#ffcc4d; filter:drop-shadow(0 3px 10px rgba(255,204,77,.4)) }
.ptsBox .value{ font:900 16px/1 Inter,system-ui,sans-serif; color:#eaf2ff }
.ptsBox .value.scoreBump{ animation:scoreBump .45s ease }
@keyframes scoreBump{ 50%{ transform:scale(1.22) } }

/* ==================== PASEK CZASU – FULL WIDTH ==================== */
#timebarWrap{
  position:fixed; left:0; right:0; bottom:0; height:12px; z-index:35; display:none;
  background: #0a1426; border-top:1px solid #1c2945;
  box-shadow:0 -8px 28px rgba(0,0,0,.35);
}
#timebarWrap.show{ display:block }
#pb{
  height:100%; width:0%;
  background:linear-gradient(90deg, hsl(130 85% 52%), hsl(106 90% 50%));
  transition:width .12s linear;
  box-shadow:0 0 26px rgba(32,201,151,.4) inset, 0 0 12px rgba(32,201,151,.25);
}

/* ================ UTYLITY / MEDIA ================ */
@media (max-width:1200px){
  :root{ --grid-gap-x: 14px; --grid-gap-y: 14px }
  #stage{ inset:110px 0 10px }
  #stage .stage-name{ font-size:36px }
  #centerBox .title{ font-size:26px }
}
@media (max-width:760px){
  #hud{ inset:8px }
  .banner{ min-width:auto; width:96vw }
  #stage{ inset:96px 0 10px }
  #stage .stage-card{ grid-template-columns:auto 1fr; gap:22px; padding:22px 24px }
  #stage .stage-avatar{ width:120px; height:120px }
  #stage .stage-avatar img{ width:92px; height:92px }
  #stage .stage-name{ font-size:28px }
  #stage .stage-score{ font-size:16px }
  #stage .stage-countdown{ width:58px; height:58px; font-size:24px }
  .centerCard{ grid-template-columns:72px 1fr }
  .centerCard .hostAv{ width:72px; height:72px }
}
