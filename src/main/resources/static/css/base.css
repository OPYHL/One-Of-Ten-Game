:root{
  --bg:#0a0d13; --fg:#eaf2ff; --card:#121826; --line:#233042; --accent:#3557ff;
  --ok:#49d17b; --bad:#ff5d6c; --muted:#9fb0d1; --hl:#4aa3ff;
}
*{ box-sizing:border-box }
html,body{ height:100% }
body{ margin:0; background:var(--bg); color:var(--fg); font-family:system-ui,Segoe UI,Roboto,Arial }
.wrap{ max-width:1400px; margin:0 auto; padding:18px }

/* Buttons / Inputs */
button{
  background:#22314a; color:#e7f1ff; border:1px solid #2e4467; border-radius:12px;
  padding:10px 14px; cursor:pointer; font-weight:700; transition:.2s transform ease;
}
button:hover{ background:#2a3f6b }
button:active{ transform:translateY(1px) }
button[disabled]{ background:#1a2336; cursor:not-allowed }
.input, select{
  background:#0f1625; color:#e7f1ff; border:1px solid #233042; border-radius:10px; padding:10px 12px
}

.grid{ display:grid; gap:12px }
.card{
  background:var(--card); border:1px solid var(--line); border-radius:14px; padding:12px; position:relative
}
.badge{ display:inline-block; padding:6px 10px; border-radius:999px; border:1px solid #2a3f6b; background:#0f1a33; color:#cfe2ff; font-size:12px }
.step{ background:var(--card); border:1px solid var(--line); border-radius:14px; padding:16px; margin-bottom:12px }
.mini{ font-size:12px; color:var(--muted) }
.center{ text-align:center }
.answering{ outline:2px solid var(--hl); box-shadow:0 0 0 4px rgba(74,163,255,.25) inset }

/* Banner + progress (TV-like) */
.topbar{ position:fixed; left:12px; top:12px; z-index:5; display:flex; gap:8px }
.centerOverlay{ position:fixed; inset:0; display:flex; align-items:center; justify-content:center; pointer-events:none; z-index:6 }
.banner{
  background:linear-gradient(135deg,#1f2a44,#101522); border:1px solid #2b3950;
  padding:22px 28px; border-radius:16px; font-size:28px; box-shadow:0 10px 40px rgba(0,0,0,.35);
  opacity:0; transform:translateY(16px); transition:.35s; text-align:center
}
.banner.show{ opacity:1; transform:translateY(0) }

.progressWrap{ position:fixed; left:0; right:0; bottom:0; height:12px; background:rgba(255,255,255,.06); z-index:5 }
.progressBar{ height:100%; width:0%; background:var(--ok); transition:width .1s linear }

/* Stage (display) */
.stage{ position:fixed; left:50%; top:50%; transform:translate(-50%,-50%) scale(.9); opacity:0;
  background:var(--card); border:1px solid var(--line); border-radius:18px; padding:18px; width:min(520px,94vw);
  box-shadow:0 20px 80px rgba(0,0,0,.45); z-index:7; display:none; transition:.35s }
.stage.show{ display:block; opacity:1; transform:translate(-50%,-50%) scale(1) }
.stage .name{ font-size:22px; font-weight:800; margin-bottom:8px }
.stage .row{ display:flex; gap:10px; align-items:center }
.stage .avatar{ width:120px; height:120px; border-radius:14px; border:1px solid #24324c; background:#0e1524; display:grid; place-items:center; overflow:hidden }
.stage .avatar img{ width:100%; height:100%; object-fit:contain }
.stage .judge{ position:absolute; right:12px; bottom:12px; font-size:40px; opacity:0; transform:scale(.9); transition:.25s }
.stage .judge.show{ opacity:1; transform:scale(1) }
.good{ color:var(--ok) } .bad{ color:var(--bad) }

/* Grid wrapper that slides down when stage is shown */
.gridWrap{ transition:transform .35s ease }
.gridWrap.below{ transform:translateY(180px) }

/* Hearts SVG helpers */
.heart{ width:18px; height:18px; filter: drop-shadow(0 0 4px rgba(255,0,0,.3)) }
.dead{ opacity:.25; filter:grayscale(1) }

/* Animations */
@keyframes pulseScore { 0%{transform:scale(1)} 40%{transform:scale(1.12)} 100%{transform:scale(1)} }
@keyframes shakeLife { 0%,100%{transform:translateX(0)} 25%{transform:translateX(-4px)} 75%{transform:translateX(4px)} }
@keyframes fadeOutUp { to{ opacity:0; transform:translateY(-8px) } }
.scorePulse{ animation:pulseScore .5s ease }
.lifeShake{ animation:shakeLife .6s ease }
.fadeOutUp{ animation:fadeOutUp .6s ease forwards }

/* Player specific responsive panel */
body.playerPage{
  min-height:100vh;
  display:flex;
  align-items:center;
  justify-content:center;
  padding:40px 24px;
}
.playerPanel{
  width:min(720px,96vw);
  margin:0 auto;
}
.playerStep{ display:flex; flex-direction:column; gap:22px; }
.stepHeader{ display:flex; align-items:center; gap:14px; }
.stepBack{
  width:44px; height:44px; border-radius:14px;
  border:1px solid #253552; background:linear-gradient(135deg, rgba(21,35,62,.9), rgba(14,22,39,.9));
  color:#9fb0d1; cursor:pointer; position:relative;
}
.stepBack::before{
  content:""; position:absolute; inset:0; margin:auto;
  width:12px; height:12px; border-left:2px solid currentColor; border-bottom:2px solid currentColor; transform:rotate(45deg);
}
.stepBack[disabled]{ opacity:.25; cursor:default; }
.stepSubtitle{ font-size:13px; letter-spacing:.4px; text-transform:uppercase; color:var(--muted); }
.stepTitle{ font-size:24px; font-weight:800; letter-spacing:.3px; }
.stepBody{ display:grid; gap:18px; }
.stepAction{
  width:100%; font-size:18px; padding:16px 18px; border-radius:16px;
  background:linear-gradient(135deg,#24408b,#1b2b55); border:1px solid #2f4aa0;
  transition:.2s transform ease, .2s box-shadow ease; box-shadow:0 12px 40px rgba(0,0,0,.35);
}
.stepAction.primary{ background:linear-gradient(135deg,#ff9b3d,#f76b1c); border-color:#ff9b3d; color:#1a120b; text-shadow:0 1px 0 rgba(255,255,255,.3); }
.stepAction:disabled{ background:#1a2336; border-color:#1f2a42; box-shadow:none; }
.seatCarousel{ display:flex; align-items:center; justify-content:center; gap:18px; }
.seatViewport{
  flex:1 1 auto; max-width:min(440px, 100%);
  overflow:hidden; padding:8px 0; position:relative;
  mask-image:linear-gradient(90deg, transparent 0, #000 16%, #000 84%, transparent 100%);
}
.seatTrack{
  display:flex; gap:18px; padding:0 8px;
  transform:translateX(calc(-1 * var(--seat-track-offset, 0px)));
  transition:transform .45s cubic-bezier(.2,.8,.2,1);
  will-change:transform;
}
.seatTrack.noTransition{ transition:none; }
.seatCard{
  scroll-snap-align:center;
  min-width:140px; padding:18px; border-radius:22px; border:1px solid #273b5d;
  background:linear-gradient(160deg, rgba(32,49,86,.95), rgba(12,18,32,.92));
  display:grid; gap:6px; justify-items:center; cursor:pointer;
  transition:.25s ease;
  color:#dbe7ff; position:relative;
  box-shadow:0 18px 45px rgba(0,0,0,.35);
  transform:scale(.72);
  opacity:.4;
}
.seatCard .seatNumber{ font-size:40px; font-weight:800; letter-spacing:.6px; }
.seatCard .seatLabel{ font-size:13px; text-transform:uppercase; letter-spacing:.3px; color:rgba(219,231,255,.65); }
.seatCard.focus{ transform:scale(1); opacity:1; border-color:#4aa3ff; box-shadow:0 22px 55px rgba(28,64,132,.55); }
.seatCard.focus .seatNumber{ font-size:46px; }
.seatCard.adjacent{ transform:scale(.85); opacity:.75; }
.seatCard.faded{ opacity:.4; }
.seatCard.taken{ opacity:.25; }
.seatCard.selected::after{
  content:"";
  position:absolute;
  inset:10px;
  border-radius:18px;
  border:1px solid rgba(74,163,255,.65);
  box-shadow:0 0 0 3px rgba(74,163,255,.28);
}
.carouselNav{
  width:54px; height:54px; border-radius:18px; border:1px solid #273b5d;
  background:linear-gradient(145deg, rgba(23,34,58,.95), rgba(11,17,30,.92));
  position:relative; color:#94addf; flex:0 0 auto;
}
.carouselNav::before{
  content:""; position:absolute; inset:0; margin:auto;
  width:14px; height:14px; border-top:2px solid currentColor; border-right:2px solid currentColor;
  transform:rotate(45deg);
}
.carouselNav.prev::before{ transform:rotate(225deg); }
.carouselNav.next::before{ transform:rotate(45deg); }
.carouselNav:disabled{ opacity:.25; cursor:not-allowed; }
.choiceGrid{ display:grid; gap:16px; grid-template-columns:repeat(auto-fit,minmax(160px,1fr)); }
.choiceCard{
  border-radius:20px; border:1px solid #273b5d; background:linear-gradient(135deg, rgba(21,33,56,.95), rgba(11,17,30,.95));
  padding:20px 18px; display:grid; gap:14px; justify-items:center; cursor:pointer;
  transition:.2s transform ease, .2s box-shadow ease; color:#e7f1ff;
}
.choiceCard .choiceLabel{ font-weight:700; letter-spacing:.2px; }
.choiceCard .choiceIcon{
  width:86px; height:86px; border-radius:22px; border:1px solid rgba(64,92,142,.7);
  background:radial-gradient(circle at 50% 25%, rgba(255,255,255,.12), rgba(12,18,30,.95)); position:relative;
}
.choiceCard .choiceIcon::after{
  content:""; position:absolute; inset:18px; border-radius:50%;
  background:radial-gradient(circle at 50% 30%, rgba(255,255,255,.7), rgba(255,255,255,0)); opacity:.3;
}
.choiceCard .choiceIcon.female{ background:linear-gradient(160deg, rgba(255,102,171,.45), rgba(107,60,162,.35)); }
.choiceCard .choiceIcon.male{ background:linear-gradient(160deg, rgba(74,163,255,.45), rgba(34,92,188,.35)); }
.avatarCard{ padding:22px 20px; background:linear-gradient(145deg, rgba(23,34,58,.95), rgba(10,14,24,.96)); }
.avatarCard .avatarThumb{
  width:96px; height:96px; border-radius:28px; border:1px solid rgba(68,96,152,.55);
  background:#0e1524; object-fit:contain; padding:12px;
  box-shadow:0 16px 45px rgba(0,0,0,.45); transition:.25s transform ease;
}
.avatarCard:hover .avatarThumb{ transform:translateY(-4px); }
.choiceCard.selected{ border-color:#4aa3ff; box-shadow:0 0 0 3px rgba(74,163,255,.35); transform:translateY(-2px); }
.choiceCard.selected .choiceLabel{ color:#fff; }
.avatarPreviewWrap{ display:grid; gap:20px; grid-template-columns:repeat(auto-fit,minmax(220px,1fr)); align-items:center; }
.avatarPreview{
  width:100%; aspect-ratio:1/1; border-radius:26px; border:1px solid #30456d;
  display:grid; place-items:center; background:linear-gradient(145deg, rgba(27,40,71,.92), rgba(9,14,26,.92));
  box-shadow:0 16px 45px rgba(0,0,0,.45);
}
.avatarPreview img{ width:76%; height:76%; object-fit:contain; filter:drop-shadow(0 16px 24px rgba(0,0,0,.45)); }
.summaryList{
  display:grid; gap:14px; font-size:15px; background:rgba(12,18,30,.65);
  border:1px solid rgba(48,69,109,.4); border-radius:20px; padding:20px 22px;
}
.summaryList span{ color:var(--muted); display:block; font-size:12px; letter-spacing:.3px; text-transform:uppercase; }
.summaryList b{ font-size:18px; letter-spacing:.3px; }
.avatarGrid{ grid-template-columns:repeat(auto-fit,minmax(160px,1fr)); }
.avatarGrid .choiceCard{ gap:18px; }
.avatarGrid .choiceLabel{ font-size:15px; letter-spacing:.4px; }
.playerBox{
  background:var(--card);
  border:1px solid var(--line);
  border-radius:20px;
  padding:28px;
  box-shadow:0 24px 70px rgba(0,0,0,.45);
}
.playerPanel .row{ gap:14px }
.playerPanel button{
  font-size:18px;
  padding:16px 18px;
  border-radius:16px;
}
.playerPanel .input,
.playerPanel select{
  font-size:18px;
  padding:14px 16px;
  border-radius:14px;
}
.formField{ display:grid; gap:12px; }
.fieldLabel{ font-size:13px; letter-spacing:.4px; text-transform:uppercase; color:var(--muted); font-weight:700; }
.fieldInput{
  border-radius:18px; border:1px solid #273b5d;
  background:linear-gradient(160deg, rgba(25,37,63,.95), rgba(10,16,28,.95));
  padding:4px 6px;
  box-shadow:0 18px 50px rgba(0,0,0,.35);
}
.fieldInput .input{
  width:100%; border:none; background:transparent; padding:18px 18px 16px; font-size:22px; font-weight:700;
}
.fieldInput .input:focus{ outline:none; box-shadow:none; }
.playerGrid{ display:grid; grid-template-columns:128px 1fr; gap:22px; align-items:center }
.playerAvatar{ width:128px; height:128px; border-radius:18px; border:1px solid #2a3b5f; background:linear-gradient(145deg, rgba(19,30,52,.95), rgba(11,16,26,.95)); display:grid; place-items:center; overflow:hidden; position:relative }
.playerAvatar img{ width:100%; height:100%; object-fit:contain }
.avatar-theme-classic{ background:linear-gradient(145deg,#1b2d52,#0c1426); border-color:#2a3b5f; }
.avatar-theme-sunrise{ background:linear-gradient(145deg,#ffb06a,#f46332); border-color:#f58446; }
.avatar-theme-forest{ background:linear-gradient(145deg,#40b884,#205c3d); border-color:#2f7c55; }
.avatar-theme-midnight{ background:linear-gradient(145deg,#6d62ff,#241c6f); border-color:#4c45c7; }
.avatarPreview.avatar-theme-sunrise{ box-shadow:0 16px 45px rgba(247,111,44,.35); }
.avatarPreview.avatar-theme-forest{ box-shadow:0 16px 45px rgba(64,184,132,.25); }
.avatarPreview.avatar-theme-midnight{ box-shadow:0 16px 45px rgba(109,98,255,.3); }
.avatarFx{
  position:absolute;
  inset:-10px;
  display:flex;
  align-items:center;
  justify-content:center;
  pointer-events:none;
  opacity:0;
  transform:scale(.94);
  transition:opacity .3s ease, transform .3s ease;
}
.avatarFx.show-result{
  opacity:1;
  transform:scale(1);
}
.avatarFxResult{
  position:absolute;
  inset:0;
  display:none;
  align-items:center;
  justify-content:center;
}
.avatarFx.show-result .avatarFxResult{ display:flex; }
.avatarFxResult{
  inset:-6px;
  border-radius:50%;
  background:radial-gradient(circle at center, rgba(11,18,32,.85) 0%, rgba(11,18,32,.7) 40%, rgba(11,18,32,0) 70%);
  filter:drop-shadow(0 14px 30px rgba(0,0,0,.55));
  transform:scale(.86);
  opacity:0;
}
.avatarFx.show-result .avatarFxResult{
  opacity:1;
  transform:scale(1);
  transition:opacity .25s ease, transform .25s cubic-bezier(.2,.8,.2,1);
}
.avatarFxResult.pulse{
  animation:resultPulse .45s cubic-bezier(.3,1.35,.4,1) forwards;
}
@keyframes resultPulse{
  0%{ transform:scale(.6); opacity:0; }
  65%{ transform:scale(1.05); opacity:1; }
  100%{ transform:scale(1); opacity:1; }
}
.avatarFxResult::before{
  content:"";
  position:absolute;
  inset:12%;
  border-radius:50%;
  background:rgba(4,9,18,.65);
  box-shadow:inset 0 0 0 1px rgba(255,255,255,.04);
}
.avatarFxResultIcon{
  width:48%;
  height:48%;
  transform:scale(.6);
  opacity:0;
}
.avatarFxResultIcon.pop{
  animation:iconPop .55s cubic-bezier(.3,1.4,.4,1) forwards;
}
@keyframes iconPop{
  0%{ transform:scale(.35); opacity:0; }
  60%{ transform:scale(1.1); opacity:1; }
  100%{ transform:scale(1); opacity:1; }
}
.avatarFx.result-ok .avatarFxResultIcon{
  background:var(--ok);
  -webkit-mask:url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path fill="black" d="M20.285 6.707 9 18l-5.285-5.293 1.414-1.414L9 15.172l9.871-9.879z"/></svg>') center/contain no-repeat;
  mask:url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path fill="black" d="M20.285 6.707 9 18l-5.285-5.293 1.414-1.414L9 15.172l9.871-9.879z"/></svg>') center/contain no-repeat;
}
.avatarFx.result-bad .avatarFxResultIcon{
  background:var(--bad);
  -webkit-mask:url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path fill="black" d="m18.364 5.636-6.364 6.364 6.364 6.364-1.414 1.414L12 13.414l-4.95 4.95-1.414-1.414L10.586 12 5.636 7.05l1.414-1.414L12 10.586l4.95-4.95z"/></svg>') center/contain no-repeat;
  mask:url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path fill="black" d="m18.364 5.636-6.364 6.364 6.364 6.364-1.414 1.414L12 13.414l-4.95 4.95-1.414-1.414L10.586 12 5.636 7.05l1.414-1.414L12 10.586l4.95-4.95z"/></svg>') center/contain no-repeat;
}

.playerStats{ display:flex; gap:16px; margin-top:12px }
.playerStat{ flex:1; background:#0f1625; border:1px solid #2a3b5f; border-radius:16px; padding:16px; text-align:center; font-size:16px }
.playerStat b{ display:block; font-size:30px; margin-top:6px }
.playerBar{ margin-top:18px; height:16px; background:#13203a; border:1px solid #24406f; border-radius:999px; overflow:hidden }
.playerBar>i{ display:block; height:100%; width:0%; background:var(--ok); transition:width .1s linear }
.playerQuestion{ margin:18px 0; padding:18px; background:#0f1625; border:1px solid #2a3b5f; border-radius:16px; }
.playerQuestion .mini{ font-size:14px }
.playerQuestionText{ margin-top:12px; font-size:18px; line-height:1.6; }
.out-card{ display:grid; gap:8px; text-align:center; padding:22px; }
.out-card .out-title{ font-size:20px; font-weight:800; letter-spacing:.3px; }
.out-card .out-stats{ font-size:16px; line-height:1.6; }
.out-card .out-place{ font-size:15px; color:var(--muted); }
.out-card .out-thanks{ font-size:13px; text-transform:uppercase; letter-spacing:1px; color:var(--muted); }

@media (max-width:680px){
  body.playerPage{ padding:28px 16px; align-items:flex-start }
  .playerPanel{ width:min(580px,96vw) }
  .playerBox{ padding:24px }
  .stepHeader{ flex-wrap:wrap; }
  .stepTitle{ font-size:20px; }
  .seatGrid{ grid-template-columns:repeat(auto-fit,minmax(72px,1fr)); }
  .seatButton{ height:64px; font-size:22px; }
  .choiceGrid{ grid-template-columns:repeat(auto-fit,minmax(140px,1fr)); }
  .avatarPreviewWrap{ grid-template-columns:1fr; }
  .avatarPreview{ max-width:260px; margin:0 auto; }
  .playerGrid{ grid-template-columns:92px 1fr; gap:16px }
  .playerAvatar{ width:92px; height:92px; border-radius:16px }
  .avatarFx{ inset:-8px }
  .playerPanel button{ font-size:16px; padding:14px 16px }
  .playerPanel .input,
  .playerPanel select{ font-size:16px; padding:12px 14px }
  .playerStat{ padding:14px }
  .playerStat b{ font-size:24px }
  .playerBar{ height:14px }
  .playerQuestion{ margin:16px 0; padding:16px }
  .playerQuestionText{ font-size:17px }
}

/* Mobile tweaks */
@media (max-width:680px){
  .stage .row{ flex-direction:column; align-items:flex-start }
  .stage .avatar{ width:100px; height:100px }
}

/* Modal */
.modalBackdrop{ position:fixed; inset:0; background:rgba(0,0,0,.55); display:none; align-items:center; justify-content:center; z-index:20 }
.modal{ background:var(--card); border:1px solid var(--line); border-radius:16px; width:min(640px,94vw); padding:16px; box-shadow:0 12px 60px rgba(0,0,0,.45) }
.modal h3{ margin:0 0 10px 0 }

/* ✅ responsywna siatka w popupie wyboru */
.modal .grid{
  display:grid;
  gap:10px;
  grid-template-columns: repeat(auto-fit, minmax(160px, 1fr));
}

/* ✅ kafelek o stałej wysokości + elipsa w tytule */
.modal .item{
  background:#0f1625;
  border:1px solid #2a3b5f;
  border-radius:12px;
  padding:10px;
  text-align:center;
  cursor:pointer;
  display:flex;
  flex-direction:column;
  justify-content:center;
  align-items:center;
  min-height:84px;           /* równa wysokość wszystkich */
  font-size:14px;
}
.modal .item > div:first-child{
  font-weight:700;
  white-space:nowrap;        /* nie łamie wiersza */
  overflow:hidden;
  text-overflow:ellipsis;    /* … gdy za długie */
  width:100%;
}
.modal .item .mini{
  white-space:nowrap;
  opacity:.85;
}

.modal .row{ display:flex; gap:8px; align-items:center; justify-content:flex-end; margin-top:10px }
.modalBackdrop.show{ display:flex }

/* === LOCKED state for player "Znam odpowiedź!" === */
#know{ position:relative }
#know.locked,
#know.locked[disabled]{
  background:#142036;           /* ciemniejszy niż zwykły disabled */
  border-color:#2a3b5f;
  color:#9fb0d1;
  cursor:not-allowed;
  padding-left:40px;            /* miejsce na ikonę */
  box-shadow:inset 0 0 0 1px rgba(74,163,255,.06);
  animation: lockPulse 1.6s ease-out infinite;
}

/* Ikona kłódki jako maska SVG — wygląda identycznie na wszystkich platformach */
#know.locked::before{
  content:"";
  position:absolute;
  left:14px; top:50%;
  width:18px; height:18px;
  transform:translateY(-50%);
  background:#9fb0d1;
  -webkit-mask: url('data:image/svg+xml;utf8,\
<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">\
<path fill=\"black\" d=\"M12 1a5 5 0 0 1 5 5v3h1a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2v-9a2 2 0 0 1 2-2h1V6a5 5 0 0 1 5-5m0 2a3 3 0 0 0-3 3v3h6V6a3 3 0 0 0-3-3Z\"/>\
</svg>') no-repeat center / contain;
  mask: url('data:image/svg+xml;utf8,\
<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">\
<path fill=\"black\" d=\"M12 1a5 5 0 0 1 5 5v3h1a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2v-9a2 2 0 0 1 2-2h1V6a5 5 0 0 1 5-5m0 2a3 3 0 0 0-3 3v3h6V6a3 3 0 0 0-3-3Z\"/>\
</svg>') no-repeat center / contain;
  opacity:.95;
}

/* Delikatny puls, żeby było czytelne, że „czekamy” (cooldown) */
@keyframes lockPulse{
  0%{ box-shadow: inset 0 0 0 0 rgba(159,176,209,.28) }
  100%{ box-shadow: inset 0 0 0 10px rgba(159,176,209,0) }
}

/* === PING wokół avatara gracza w momencie odpowiedzi === */
#av {
  border-radius: 16px;              /* zaokrąglenie, żeby ring ładnie siadał */
  transition: filter .2s ease;
}

/* miękki pulsujący ring */
#av.ping {
  animation: pingRing 1.4s cubic-bezier(0,0,.2,1) infinite;
  box-shadow: 0 0 0 0 rgba(74,163,255,.55);   /* startowy pierścień */
  outline: 2px solid rgba(74,163,255,.45);    /* delikatna poświata */
  outline-offset: 0;
  filter: drop-shadow(0 8px 20px rgba(74,163,255,.18));
}

@keyframes pingRing {
  0%   { box-shadow: 0 0 0 0 rgba(74,163,255,.55) }
  70%  { box-shadow: 0 0 0 18px rgba(74,163,255,0) }
  100% { box-shadow: 0 0 0 0 rgba(74,163,255,0) }
}

/* trochę mniejszy ring na bardzo małych ekranach */
@media (max-width: 440px){
  #av.ping { outline-width: 1.5px }
  @keyframes pingRing {
    0%   { box-shadow: 0 0 0 0 rgba(74,163,255,.55) }
    70%  { box-shadow: 0 0 0 12px rgba(74,163,255,0) }
    100% { box-shadow: 0 0 0 0 rgba(74,163,255,0) }
  }
}

/* === Wyróżnienia gracza === */
/* mocny highlight karty, gdy odpowiadam */
body.me-answering #step3 {
  outline: 2px solid rgba(74,163,255,.7);
  box-shadow: 0 0 0 6px rgba(74,163,255,.12), 0 18px 60px rgba(0,0,0,.55);
  border-radius: 16px;
}

/* złota poświata gdy "JESTEŚ PIERWSZY!" */
body.me-won #step3 {
  outline: 2px solid rgba(255,210,74,.9);
  box-shadow: 0 0 0 6px rgba(255,210,74,.18), 0 18px 60px rgba(0,0,0,.55);
}

/* subtelne „oczekiwanie” po kliknięciu znam odp. */
body.me-pending #step3 {
  outline: 2px dashed rgba(160,180,210,.35);
  box-shadow: 0 0 0 4px rgba(160,180,210,.06);
}

/* ring na avatarze – włączany klasą .ping (dodawane z JS) */
#av { border-radius: 16px; transition: filter .2s ease; }
#av.ping {
  animation: pingRing 1.4s cubic-bezier(0,0,.2,1) infinite;
  box-shadow: 0 0 0 0 rgba(74,163,255,.55);
  outline: 2px solid rgba(74,163,255,.45);
  outline-offset: 0;
  filter: drop-shadow(0 8px 20px rgba(74,163,255,.18));
}
@keyframes pingRing {
  0%   { box-shadow: 0 0 0 0 rgba(74,163,255,.55) }
  70%  { box-shadow: 0 0 0 18px rgba(74,163,255,0) }
  100% { box-shadow: 0 0 0 0 rgba(74,163,255,0) }
}
@media (max-width: 440px){
  #av.ping { outline-width: 1.5px }
  @keyframes pingRing {
    0%   { box-shadow: 0 0 0 0 rgba(74,163,255,.55) }
    70%  { box-shadow: 0 0 0 12px rgba(74,163,255,0) }
    100% { box-shadow: 0 0 0 0 rgba(74,163,255,0) }
  }
}

/* przycisk "Znam odpowiedź!" – stany */
#know.locked { position: relative; }
#know.locked::after { content: " 🔒"; opacity:.75; }

body.me-pending #know {
  pointer-events: none;
}
body.me-pending #know::after {
  content: " ⏳";
}

body.me-won #know {
  background: linear-gradient(180deg, #1f3f80, #173468);
  border-color: #3c64b1;
  color: #e8f0ff;
}

body.me-answering #know {
  background: linear-gradient(180deg, #0f2d1c, #0a1e14);
  border-color: #1e4730;
  color: #d6ffe9;
}

/* === Odznaka roli (Wybierasz / Odpowiadasz / Wybrano Cię) === */
.role-badge{
  position:absolute; top:-12px; right:-12px;
  padding:6px 12px; border-radius:9999px; font-size:12px; font-weight:800;
  background:#0c1730; color:#cfe0ff; border:1px solid #203452;
  box-shadow: 0 12px 30px rgba(0,0,0,.45), inset 0 1px 0 rgba(255,255,255,.05);
  transform: translateY(-10px); opacity:0; pointer-events:none;
  transition: transform .35s cubic-bezier(.2,.8,.2,1), opacity .25s ease;
}
.role-badge.show{ transform: translateY(0); opacity:1; }
.role-badge.ok{ background:#0f2d1c; color:#d6ffe9; border-color:#1e4730; }
.role-badge.warn{ background:#2a2140; color:#e6dbff; border-color:#4c3e7c; }
.role-badge.info{ background:#10233f; color:#e0ecff; border-color:#254977; }
.role-badge.bad{ background:#2e1518; color:#ffd6db; border-color:#5a2b33; }

/* Highlighty ról */
body.me-choosing #step3{
  outline:2px dashed rgba(124,108,255,.55);
  box-shadow: 0 0 0 6px rgba(124,108,255,.12);
  border-radius:16px;
}
body.me-picked #step3{
  outline:2px solid rgba(170,126,255,.75);
  box-shadow: 0 0 0 6px rgba(170,126,255,.15), 0 18px 60px rgba(0,0,0,.55);
  border-radius:16px;
}

/* istniejące highlighty z wcześniejszej wersji nadal działają:
   body.me-won, body.me-answering, body.me-pending oraz #av.ping */

/* === BAN na to pytanie (po złej odp. / timeout przy BUZZING) === */
body.me-banned #step3{
  position: relative;
  outline: 2px solid rgba(255,76,76,.9);
  box-shadow: 0 0 0 6px rgba(255,76,76,.18), 0 18px 60px rgba(0,0,0,.55);
  border-radius: 16px;
  animation: bannedPulse 1.2s cubic-bezier(.2,.8,.2,1) infinite;
}
@keyframes bannedPulse{
  0%   { box-shadow: 0 0 0 6px rgba(255,76,76,.18), 0 18px 60px rgba(0,0,0,.55) }
  70%  { box-shadow: 0 0 0 18px rgba(255,76,76,0),  0 18px 60px rgba(0,0,0,.55) }
  100% { box-shadow: 0 0 0 6px rgba(255,76,76,.18), 0 18px 60px rgba(0,0,0,.55) }
}

/* badge mamy już, tu tylko dopracujmy wariant “bad” */
.role-badge.bad{
  background:#2e1518; color:#ffd6db; border-color:#5a2b33;
  text-shadow: 0 1px 0 rgba(0,0,0,.35);
}

/* przycisk gdy mam bana */
body.me-banned #know{
  filter: grayscale(1) brightness(.85);
  cursor: not-allowed;
}


#timerCard .badge{min-width:72px; display:inline-flex; justify-content:center; font-weight:800;}
#timerCard input[type=range]{width:100%; accent-color:var(--accent);}
