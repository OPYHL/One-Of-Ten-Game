<!doctype html>
<html lang="pl">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>1 z 10 — Zawodnik</title>
    <link rel="stylesheet" href="/css/base.css" />
</head>
<body class="playerPage">
<div class="playerPanel">
    <div class="playerBox playerStep" id="stepSeat">
        <div class="stepHeader">
            <button class="stepBack" data-back-step="stepSeat" aria-label="Wróć" disabled></button>
            <div>
                <div class="stepSubtitle">Krok 1 z 4</div>
                <div class="stepTitle">Wybierz stanowisko</div>
            </div>
        </div>
        <input id="slot" type="hidden" />
        <div class="seatCarousel" aria-label="Wybór stanowiska">
            <button class="carouselNav prev" id="seatPrev" type="button" aria-label="Poprzednie stanowisko"></button>
            <div class="seatViewport" id="seatViewport">
                <div class="seatTrack" id="seatTrack" role="radiogroup" aria-label="Wybór stanowiska">
                    <button class="seatCard" type="button" role="radio" data-seat="1">
                        <span class="seatNumber">1</span>
                        <span class="seatLabel">Stanowisko 1</span>
                    </button>
                    <button class="seatCard" type="button" role="radio" data-seat="2">
                        <span class="seatNumber">2</span>
                        <span class="seatLabel">Stanowisko 2</span>
                    </button>
                    <button class="seatCard" type="button" role="radio" data-seat="3">
                        <span class="seatNumber">3</span>
                        <span class="seatLabel">Stanowisko 3</span>
                    </button>
                    <button class="seatCard" type="button" role="radio" data-seat="4">
                        <span class="seatNumber">4</span>
                        <span class="seatLabel">Stanowisko 4</span>
                    </button>
                    <button class="seatCard" type="button" role="radio" data-seat="5">
                        <span class="seatNumber">5</span>
                        <span class="seatLabel">Stanowisko 5</span>
                    </button>
                    <button class="seatCard" type="button" role="radio" data-seat="6">
                        <span class="seatNumber">6</span>
                        <span class="seatLabel">Stanowisko 6</span>
                    </button>
                    <button class="seatCard" type="button" role="radio" data-seat="7">
                        <span class="seatNumber">7</span>
                        <span class="seatLabel">Stanowisko 7</span>
                    </button>
                    <button class="seatCard" type="button" role="radio" data-seat="8">
                        <span class="seatNumber">8</span>
                        <span class="seatLabel">Stanowisko 8</span>
                    </button>
                    <button class="seatCard" type="button" role="radio" data-seat="9">
                        <span class="seatNumber">9</span>
                        <span class="seatLabel">Stanowisko 9</span>
                    </button>
                    <button class="seatCard" type="button" role="radio" data-seat="10">
                        <span class="seatNumber">10</span>
                        <span class="seatLabel">Stanowisko 10</span>
                    </button>
                </div>
            </div>
            <button class="carouselNav next" id="seatNext" type="button" aria-label="Następne stanowisko"></button>
        </div>
        <button id="next1" class="stepAction" disabled>Dalej</button>
        <div class="mini center" id="seatHint">Wybierz wolne stanowisko, z którego będziesz grać.</div>
    </div>

    <div class="playerBox playerStep" id="stepName" style="display:none">
        <div class="stepHeader">
            <button class="stepBack" data-back-step="stepSeat" aria-label="Wróć"></button>
            <div>
                <div class="stepSubtitle">Krok 2 z 4</div>
                <div class="stepTitle">Podaj imię i nazwisko</div>
            </div>
        </div>
        <div class="stepBody">
            <div class="formField">
                <label class="fieldLabel" for="name">Imię i nazwisko</label>
                <div class="fieldInput">
                    <input id="name" class="input" type="text" placeholder="Wpisz imię i nazwisko" autocomplete="name" />
                </div>
            </div>
        </div>
        <button id="next2" class="stepAction" disabled>Dalej</button>
        <div class="mini center" id="nameHint">To dane, które zobaczy prowadzący.</div>
    </div>

    <div class="playerBox playerStep" id="stepGender" style="display:none">
        <div class="stepHeader">
            <button class="stepBack" data-back-step="stepName" aria-label="Wróć"></button>
            <div>
                <div class="stepSubtitle">Krok 3 z 4</div>
                <div class="stepTitle">Wybierz płeć</div>
            </div>
        </div>
        <input id="gender" type="hidden" value="" />
        <div class="choiceGrid" id="genderGrid">
            <button class="choiceCard" type="button" data-gender="FEMALE">
                <div class="choiceIcon female"></div>
                <div class="choiceLabel">Kobieta</div>
            </button>
            <button class="choiceCard" type="button" data-gender="MALE">
                <div class="choiceIcon male"></div>
                <div class="choiceLabel">Mężczyzna</div>
            </button>
        </div>
        <button id="next3" class="stepAction" disabled>Dalej</button>
        <div class="mini center" id="genderHint">Ułatwi to dopasowanie awataru.</div>
    </div>

    <div class="playerBox playerStep" id="stepAvatar" style="display:none">
        <div class="stepHeader">
            <button class="stepBack" data-back-step="stepGender" aria-label="Wróć"></button>
            <div>
                <div class="stepSubtitle">Krok 4 z 4</div>
                <div class="stepTitle">Wybierz avatar</div>
            </div>
        </div>
        <div class="avatarPreviewWrap">
            <div class="avatarPreview" id="avatarPreview">
                <img id="avatarPreviewImg" src="/img/male.png" alt="Podgląd avataru" />
            </div>
            <div class="summaryList">
                <div><span>Stanowisko</span><b id="summarySeat">—</b></div>
                <div><span>Imię i nazwisko</span><b id="summaryName">—</b></div>
                <div><span>Płeć</span><b id="summaryGender">—</b></div>
                <div><span>Avatar</span><b id="summaryAvatar">—</b></div>
            </div>
        </div>
        <div class="choiceGrid avatarGrid" id="avatarGrid" aria-live="polite"></div>
        <button id="join" class="stepAction primary" disabled>Dołącz do gry</button>
        <div class="mini center" id="avatarHint">Wybierz wygląd, a następnie dołącz do gry.</div>
    </div>

    <div class="playerBox" id="stepGame" style="display:none">
        <div class="playerGrid">
            <div class="playerAvatar" id="playerAvatar">
                <div id="avatarFx" class="avatarFx">
                    <div id="avatarFxResult" class="avatarFxResult">
                        <div id="avatarFxResultIcon" class="avatarFxResultIcon"></div>
                    </div>
                </div>
                <img id="av" src="/img/male.png" alt="">
            </div>
            <div>
                <div class="row" style="gap:8px">
                    <span class="badge" id="seat">Stanowisko —</span>
                    <span class="badge" id="phase">Faza: —</span>
                </div>
                <div class="playerStats">
                    <div class="playerStat">Życia <b id="lives">3</b></div>
                    <div class="playerStat">Punkty <b id="score">0</b></div>
                </div>
            </div>
        </div>

        <div class="center" style="margin:14px 0 6px">
            <div id="status" class="mini">Czekaj na rozpoczęcie…</div>
        </div>

        <div id="questionWrap" class="playerQuestion" style="display:none">
            <div class="mini">Pytanie od prowadzącego</div>
            <div id="questionText" class="playerQuestionText">—</div>
        </div>

        <button id="know" style="width:100%" disabled>Znam odpowiedź!</button>
        <div class="playerBar"><i id="pb"></i></div>

        <!-- overlay po eliminacji -->
        <div id="outOverlay" style="display:none; margin-top:12px" class="card out-card">
            <div class="center out-title"><b>Odpadasz z gry</b></div>
            <div class="center out-stats" id="outStats"></div>
            <div class="center out-place" id="outPlace"></div>
            <div class="mini center out-thanks">Dziękujemy za rozgrywkę!</div>
        </div>

        <!-- POPUP wyboru przeciwnika -->
        <div id="chooseBackdrop" class="modalBackdrop">
            <div class="modal">
                <h3>Wybierz przeciwnika</h3>
                <div id="chooseGrid" class="grid"></div>
                <div class="mini">Wybieraj spośród aktywnych graczy. Operator zatwierdzi wybór.</div>
            </div>
        </div>
    </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/sockjs-client@1/dist/sockjs.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/stompjs@2.3.3/lib/stomp.min.js"></script>
<script type="module" src="/js/player.js"></script>
</body>
</html>
